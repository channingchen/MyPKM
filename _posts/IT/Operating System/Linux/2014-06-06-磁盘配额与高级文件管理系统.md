---
layout: default
title: 磁盘配额和高级文件管理系统
---

# 磁盘配额的应用

1. Quota用途：限制磁盘配额

1. Quota使用限制
    
    * 仅能针对整个文件系统
    * linux核心必须支持quota
    * 只对一般使用者有效

1. Quota的规范配置项目

    * 容量限制或文件数量限制（限制block用来或inode数量）
    * 柔性劝导与硬性规定（soft/hard）
        * hard表示绝对不能超过的值
        * 低于soft时，可正常使用；介于soft和hard时，每次登陆会发送警告，且会给一个宽限时间(grace time)，如果使用者在宽限时间之内重新降回soft以下，则宽限时间停止
        * 宽限时间会倒计时，倒计时到时，会用soft取代hard，这样磁盘就会锁住，无法新增文件
        
(to be continued...)
    
# 软件磁盘阵列（software RAID）

1. RAID

    1. RAID使用多个较小的磁盘合成一个较大的磁盘，可以设置不同的level
    
        * RAID-0（等量模式，stripe）：效能最佳，文件切出等量的区块，交错存储到不同磁盘上
        * RAID-1（映射模式，mirror）：完整备份，同一份数据保存在两个相同磁盘上（性能可能下降）
        * RAID 0+1, RAID 1+0：先让两个磁盘组成RAID-0，再让这两组磁盘组成RAID-1；先让两个磁盘组成RAID-1，再让两个磁盘组成RAID-0
        * RAID-5（均衡考虑）：类似RAID-0，每个写入过程时在每个磁盘加上校验位，这个数据会记录其他磁盘的备份数据，在发生损毁时用于复原。
    
        如图：    
        ！[RAID5](http://channingchen.github.io/MyPKM/images/raid5.gif "Raid-5")    
        那么，当损毁只有一个磁盘时时，就可以用原始数据和校验码来恢复另一个磁盘上的部分数据。
    
        * RAID-6：基本和RAID-5相同，但用两个校验磁盘，冗余可以达到两个磁盘。
    
        总结：
    
        * RAID提高数据安全和可靠性
        * RAID提高读写效能
        * RAID提高磁盘容量
        
    1. 软件磁盘阵列和硬件磁盘阵列
        
        * 硬件磁盘阵列通过磁盘阵列卡搭建阵列
        * 软件磁盘阵列通过CPU运算与I/O总线等资源实现硬件功能
    
    
  
